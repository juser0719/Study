{"remainingRequest":"/Users/jeon-ungjae/Desktop/woong/Coding/Study/FE/Vue_FE/Vue_project/happyhouse/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeon-ungjae/Desktop/woong/Coding/Study/FE/Vue_FE/Vue_project/happyhouse/src/components/notice/comment/CommentWrite.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Study/FE/Vue_FE/Vue_project/happyhouse/src/components/notice/comment/CommentWrite.vue","mtime":1637719971700},{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Study/FE/Vue_FE/Vue_project/happyhouse/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Study/FE/Vue_FE/Vue_project/happyhouse/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Study/FE/Vue_FE/Vue_project/happyhouse/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jeon-ungjae/Desktop/woong/Coding/Study/FE/Vue_FE/Vue_project/happyhouse/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgaHR0cCBmcm9tICJAL3V0aWwvaHR0cC1jb21tb24iOw0KaW1wb3J0IHsgd3JpdGVDb21tZW50LCBnZXRDb21tZW50LCBtb2RpZnlDb21tZW50IH0gZnJvbSAiQC9hcGkvY29tbWVudCI7DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7DQpjb25zdCBtZW1iZXJTdG9yZSA9ICJtZW1iZXJTdG9yZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImNvbW1lbnR3cml0ZSIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOywqO2bhCDsnpHshLHsnpAg7J2066aE7J2AIOuhnOq3uOyduCDqtaztmITtm4Qg66Gc6re47J247ZWcIOyCrOyaqeyekOuhnCDrsJTqvrzri6QuDQogICAgICB1c2VyaWQ6ICIiLA0KICAgICAgY29tbWVudDogIiIsDQogICAgICBhcnRpY2xlTm86ICIiLA0KICAgIH07DQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKG1lbWJlclN0b3JlLCBbImNoZWNrVXNlckluZm8iXSksDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgY29uc29sZS5sb2coImNyZWF0ZWRfQ1ciKTsNCiAgICBjb25zb2xlLmxvZyh0aGlzLmNoZWNrVXNlckluZm8pOw0KICAgIHRoaXMudXNlcmlkID0gdGhpcy5jaGVja1VzZXJJbmZvLnVzZXJJZDsNCiAgICAvLyBjb25zb2xlLmxvZygi66mU66GxIik7DQogICAgLy8gY29uc29sZS5sb2codGhpcy4kcm91dGUucGFyYW1zLmFydGljbGVubyk7DQogICAgdGhpcy5hcnRpY2xlTm8gPSB0aGlzLiRyb3V0ZS5wYXJhbXMuYXJ0aWNsZW5vOw0KICB9LA0KICBwcm9wczogew0KICAgIGFydGljbGVubzogeyB0eXBlOiBTdHJpbmcgfSwNCiAgICBtb2RpZnlDb21tZW50OiB7IHR5cGU6IE9iamVjdCB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmVnaXN0Q29tbWVudCgpIHsNCiAgICAgIHdyaXRlQ29tbWVudCgNCiAgICAgICAgew0KICAgICAgICAgIHVzZXJpZDogdGhpcy51c2VyaWQsDQogICAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LA0KICAgICAgICAgIGFydGljbGVubzogdGhpcy5hcnRpY2xlTm8sDQogICAgICAgIH0sDQogICAgICAgICh7IGRhdGEgfSkgPT4gew0KICAgICAgICAgIGxldCBtc2cgPSAi65Ox66GdIOyymOumrOyLnCDrrLjsoJzqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiI7DQogICAgICAgICAgaWYgKGRhdGEgPT09ICJzdWNjZXNzIikgew0KICAgICAgICAgICAgbXNnID0gIuuTseuhneydtCDsmYTro4zrkJjsl4jsirXri4jri6QuIjsNCiAgICAgICAgICB9DQogICAgICAgICAgYWxlcnQobXNnKTsNCiAgICAgICAgICAvLyDsnpHshLHquIAg7KeA7Jqw6riwDQogICAgICAgICAgdGhpcy5jb21tZW50ID0gIiI7DQoNCiAgICAgICAgICAvLyDrj4TshJztj4ko64yT6riAKSDslrvquLAuDQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goZ2V0Q29tbWVudCgpKTsNCiAgICAgICAgICAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0Q29tbWVudHMiLCBgL2NvbW1lbnQvJHt0aGlzLmFydGljbGVub31gKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9LA0KICAgIHVwZGF0ZUNvbW1lbnQoKSB7DQogICAgICBtb2RpZnlDb21tZW50KA0KICAgICAgICB7DQogICAgICAgICAgcW5hX21lbW9ubzogdGhpcy5tb2RpZnlDb21tZW50LnFuYV9tZW1vbm8sDQogICAgICAgICAgY29tbWVudDogdGhpcy5tb2RpZnlDb21tZW50LmNvbW1lbnQsDQogICAgICAgIH0sDQogICAgICAgICh7IGRhdGEgfSkgPT4gew0KICAgICAgICAgIGxldCBtc2cgPSAi7IiY7KCVIOyymOumrOyLnCDrrLjsoJzqsIAg67Cc7IOd7ZaI7Iq164uI64ukLiI7DQogICAgICAgICAgaWYgKGRhdGEgPT09ICJzdWNjZXNzIikgew0KICAgICAgICAgICAgbXNnID0gIuyImOygleydtCDsmYTro4zrkJjsl4jsirXri4jri6QuIjsNCiAgICAgICAgICB9DQogICAgICAgICAgYWxlcnQobXNnKTsNCg0KICAgICAgICAgIC8vIOuPhOyEnO2PiSjrjJPquIApIOyWu+q4sC4NCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChnZXRDb21tZW50KCkpOw0KICAgICAgICAgIHRoaXMuJGVtaXQoIm1vZGlmeS1jb21tZW50LWNhbmNlbCIsIGZhbHNlKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9LA0KICAgIC8vIHVwZGF0ZUNvbW1lbnRDYW5jZWwoKSB7DQogICAgLy8gICB0aGlzLiRlbWl0KCJtb2RpZnktY29tbWVudC1jYW5jZWwiLCBmYWxzZSk7DQogICAgLy8gfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["CommentWrite.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommentWrite.vue","sourceRoot":"src/components/notice/comment","sourcesContent":["<template>\r\n  <b-row v-if=\"this.modifyComment != null\" class=\"mb-3 mt-2\">\r\n    <b-col cols=\"10\">\r\n      <b-form-textarea\r\n        id=\"comment\"\r\n        placeholder=\"도서평 입력...\"\r\n        v-model=\"modifyComment.comment\"\r\n        rows=\"2\"\r\n      ></b-form-textarea>\r\n    </b-col>\r\n    <b-col>\r\n      <b-button variant=\"outline-info\" class=\"mr-2 h-100\" @click=\"updateComment\"\r\n        >수정</b-button\r\n      >\r\n      <b-button\r\n        variant=\"outline-danger\"\r\n        class=\"h-100\"\r\n        @click=\"updateCommentCancel\"\r\n        >취소</b-button\r\n      >\r\n    </b-col>\r\n  </b-row>\r\n  <b-row v-else class=\"mb-3 mt-2\">\r\n    <b-col cols=\"11\">\r\n      <b-form-textarea\r\n        id=\"comment\"\r\n        placeholder=\"댓글 입력...\"\r\n        v-model=\"comment\"\r\n        rows=\"2\"\r\n      ></b-form-textarea>\r\n    </b-col>\r\n    <b-col\r\n      ><b-button variant=\"dark\" class=\"h-100\" @click=\"registComment\"\r\n        >등록</b-button\r\n      ></b-col\r\n    >\r\n  </b-row>\r\n</template>\r\n\r\n<script>\r\n// import http from \"@/util/http-common\";\r\nimport { writeComment, getComment, modifyComment } from \"@/api/comment\";\r\nimport { mapGetters } from \"vuex\";\r\nconst memberStore = \"memberStore\";\r\n\r\nexport default {\r\n  name: \"commentwrite\",\r\n  data() {\r\n    return {\r\n      // 차후 작성자 이름은 로그인 구현후 로그인한 사용자로 바꾼다.\r\n      userid: \"\",\r\n      comment: \"\",\r\n      articleNo: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters(memberStore, [\"checkUserInfo\"]),\r\n  },\r\n  created() {\r\n    console.log(\"created_CW\");\r\n    console.log(this.checkUserInfo);\r\n    this.userid = this.checkUserInfo.userId;\r\n    // console.log(\"메롱\");\r\n    // console.log(this.$route.params.articleno);\r\n    this.articleNo = this.$route.params.articleno;\r\n  },\r\n  props: {\r\n    articleno: { type: String },\r\n    modifyComment: { type: Object },\r\n  },\r\n  methods: {\r\n    registComment() {\r\n      writeComment(\r\n        {\r\n          userid: this.userid,\r\n          comment: this.comment,\r\n          articleno: this.articleNo,\r\n        },\r\n        ({ data }) => {\r\n          let msg = \"등록 처리시 문제가 발생했습니다.\";\r\n          if (data === \"success\") {\r\n            msg = \"등록이 완료되었습니다.\";\r\n          }\r\n          alert(msg);\r\n          // 작성글 지우기\r\n          this.comment = \"\";\r\n\r\n          // 도서평(댓글) 얻기.\r\n          this.$store.dispatch(getComment());\r\n          // this.$store.dispatch(\"getComments\", `/comment/${this.articleno}`);\r\n        }\r\n      );\r\n    },\r\n    updateComment() {\r\n      modifyComment(\r\n        {\r\n          qna_memono: this.modifyComment.qna_memono,\r\n          comment: this.modifyComment.comment,\r\n        },\r\n        ({ data }) => {\r\n          let msg = \"수정 처리시 문제가 발생했습니다.\";\r\n          if (data === \"success\") {\r\n            msg = \"수정이 완료되었습니다.\";\r\n          }\r\n          alert(msg);\r\n\r\n          // 도서평(댓글) 얻기.\r\n          this.$store.dispatch(getComment());\r\n          this.$emit(\"modify-comment-cancel\", false);\r\n        }\r\n      );\r\n    },\r\n    // updateCommentCancel() {\r\n    //   this.$emit(\"modify-comment-cancel\", false);\r\n    // },\r\n  },\r\n};\r\n</script>\r\n"]}]}